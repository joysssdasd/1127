# 中国大陆部署指南

## 问题背景
Vercel 在中国大陆访问受限，需要 VPN 才能正常使用。为服务中国大陆用户，建议使用以下国内部署方案。

## 推荐方案

### 1. 腾讯云部署（强烈推荐）
- **优势**：速度快，稳定性好，价格便宜
- **产品**：腾讯云 Serverless + 云数据库

### 2. 阿里云部署
- **优势**：生态完善，技术支持好
- **产品**：阿里云函数计算 + RDS 数据库

### 3. Vercel + CDN 组合
- **优势**：保持现有部署，增加国内加速
- **产品**：又拍云/七牛云 CDN

## 详细配置

### 腾讯云部署步骤

1. **准备腾讯云账号**
   - 注册腾讯云
   - 完成实名认证

2. **创建云数据库**
   ```sql
   -- PostgreSQL 数据库配置
   CREATE DATABASE c2c_marketplace;
   -- 导入数据库结构
   ```

3. **配置 Serverless 函数**
   ```bash
   # 安装腾讯云 CLI
   npm install -g @cloudbase/cli
   tcb login
   ```

4. **环境变量配置**
   ```bash
   # 腾讯云环境变量
   SUPABASE_URL=腾讯云数据库地址
   SUPABASE_SERVICE_ROLE_KEY=数据库访问密钥
   JWT_SECRET=自定义JWT密钥
   ```

### Vercel + CDN 方案

1. **保持现有 Vercel 部署**
2. **配置国内 CDN**
   - 注册又拍云或七牛云
   - 设置源站为 Vercel 域名
   - 配置国内加速域名

## 域名配置

### 购买国内域名
- 推荐使用：阿里云万网、腾讯云域名
- 域名备案（必需）

### DNS 配置
```dns
# 示例配置
www.yourdomain.com  CNAME  国内CDN地址
api.yourdomain.com  CNAME  服务器地址
```

## 性能优化

### 前端优化
- 图片压缩
- 代码分割
- 懒加载

### 后端优化
- 数据库索引优化
- API 响应缓存
- CDN 静态资源缓存

## 成本估算

### 腾讯云方案（月费用）
- Serverless 函数：免费额度 + 超出部分约 ¥10-50
- 云数据库：¥50-200
- 域名+SSL：¥100-300
- **总计**：¥160-550/月

### CDN 方案（月费用）
- CDN 流量费：¥20-100（取决于访问量）
- 域名+SSL：¥100-300
- **总计**：¥120-400/月

## 推荐选择

### 小型项目（<1000用户）
- **方案**：Vercel + 国内CDN
- **成本**：¥120-200/月
- **部署复杂度**：低

### 中型项目（1000-10000用户）
- **方案**：腾讯云 Serverless
- **成本**：¥200-400/月
- **部署复杂度**：中

### 大型项目（>10000用户）
- **方案**：阿里云/腾讯云 ECS
- **成本**：¥400-1000+/月
- **部署复杂度**：高

## 备案指南

### 备案流程
1. 购买国内服务器
2. 准备备案材料（身份证、营业执照等）
3. 在服务商控制台提交备案申请
4. 等待管局审核（3-20工作日）

### 备案所需材料
- 个人：身份证正反面照片、核验照片
- 企业：营业执照、法人身份证、网站负责人身份证

## 紧急方案

如果急需上线，可以临时使用：
1. **Cloudflare Workers** - 部分可用
2. **GitHub Pages** - 仅静态页面
3. **Netlify** - 比 Vercel 稍好但仍有问题

## 技术支持

如需部署协助，可以联系：
- 腾讯云技术支持：95716
- 阿里云技术支持：95187
- 专业部署服务商（费用较高）