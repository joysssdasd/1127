(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{4006:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recharge",function(){return t(1184)}])},2021:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var s=t(5893),a=t(1664),i=t.n(a),r=t(1163),l=t(4611);let c=[{href:"/",label:"首页"},{href:"/publish",label:"发布"},{href:"/search",label:"智能搜索"},{href:"/recharge",label:"积分充值"},{href:"/me",label:"个人中心"}];function d(e){var n,t,a;let{children:d}=e,h=(0,r.useRouter)(),{user:o,logout:u}=(0,l.a)(),p=e=>"/"===e?"/"===h.pathname:h.pathname===e||h.pathname.startsWith("".concat(e,"/"));return(0,s.jsxs)("div",{style:{padding:"0 20px"},children:[(0,s.jsxs)("header",{className:"app-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"app-brand",children:"C2C 情报局"}),(0,s.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:"72 小时自动下架 \xb7 智能风控撮合 \xb7 Supabase 实时底座"})]}),(0,s.jsx)("nav",{className:"app-nav",children:c.map(e=>(0,s.jsx)(i(),{href:e.href,className:p(e.href)?"active":void 0,children:e.label},e.href))}),(0,s.jsx)("div",{className:"user-chip",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:600},children:null!==(n=o.phone)&&void 0!==n?n:"未绑定手机"}),(0,s.jsxs)("div",{style:{fontSize:12,color:"var(--muted)"},children:["微信：",null!==(t=o.wechat)&&void 0!==t?t:"未设置"," \xb7 积分 ",null!==(a=o.points)&&void 0!==a?a:0]})]}),(0,s.jsx)("button",{className:"secondary-btn",onClick:u,children:"退出"})]}):(0,s.jsx)(i(),{className:"primary-btn",href:"/auth/login",children:"登录 / 入驻"})})]}),(0,s.jsx)("main",{style:{maxWidth:1200,margin:"0 auto 60px",padding:"0 8px"},children:d})]})}},971:function(e,n,t){"use strict";t.d(n,{F:function(){return a}});var s=t(5893);function a(e){let{message:n}=e;return n?(0,s.jsx)("div",{className:"toast",children:n}):null}},7996:function(e,n,t){"use strict";t.d(n,{p:function(){return a}});var s=t(7294);function a(){let[e,n]=(0,s.useState)(null);return{message:e,show:(0,s.useCallback)(e=>{n(e),window.setTimeout(()=>n(null),2500)},[])}}},1184:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var s=t(5893),a=t(7294),i=t(2021),r=t(4611),l=t(7996),c=t(971);let d=[{title:"提交充值金额",description:"积分与人民币 1:1 计价，最低 10 起充。"},{title:"上传凭证链接",description:"支持截图图床、网盘、对象存储地址。"},{title:"管理员审核",description:"管理员通过短信验证码登录后台处理。"}];function h(){let{tokens:e}=(0,r.a)(),{message:n,show:t}=(0,l.p)(),[h,o]=(0,a.useState)(100),[u,p]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1),x=async()=>{if(!e){t("请先登录");return}if(!u.trim()){t("请填写凭证链接");return}f(!0);try{let s=await fetch("/api/recharge",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({amount:h,voucherUrl:u})}),a=await s.json();if(!s.ok){var n;throw Error(null!==(n=a.error)&&void 0!==n?n:"提交失败")}t("已提交，请等待管理员短信提醒"),p("")}catch(e){t(e.message)}finally{f(!1)}};return(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)("div",{className:"page-section",children:[(0,s.jsx)("div",{className:"section-heading",children:"积分充值"}),(0,s.jsx)("p",{className:"section-subtitle",children:"短信通道由 SPUG 提供，targets 参数可精确指定管理员手机号。"}),(0,s.jsx)("div",{className:"grid-three",children:d.map(e=>(0,s.jsxs)("div",{className:"feature-card",children:[(0,s.jsx)("h3",{style:{marginTop:0},children:e.title}),(0,s.jsx)("p",{style:{color:"var(--muted)"},children:e.description})]},e.title))})]}),(0,s.jsx)("div",{className:"page-section",style:{maxWidth:520,margin:"0 auto"},children:(0,s.jsxs)("div",{className:"form-grid",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"金额 / 积分"}),(0,s.jsx)("input",{type:"number",min:10,value:h,onChange:e=>o(Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"凭证链接"}),(0,s.jsx)("input",{value:u,onChange:e=>p(e.target.value),placeholder:"https://example.com/voucher.png"}),(0,s.jsx)("p",{className:"form-note",children:"截图可上传至图床后粘贴地址，管理员审核后自动入账。"})]}),(0,s.jsx)("button",{className:"primary-btn",onClick:x,disabled:m,children:m?"提交中...":"提交审核"})]})}),(0,s.jsx)(c.F,{message:n})]})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=4006)}),_N_E=e.O()}]);